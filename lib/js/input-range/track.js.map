{"version":3,"sources":["../../../src/js/input-range/track.jsx"],"names":["Track","children","PropTypes","node","isRequired","classNames","objectOf","string","draggableTrack","bool","onTrackDrag","func","onTrackMouseDown","percentages","number","props","nodeRef","React","createRef","trackDragEvent","current","getBoundingClientRect","width","max","min","left","removeDocumentMouseMoveListener","ownerDocument","addEventListener","handleMouseMove","removeDocumentMouseUpListener","handleMouseUp","removeEventListener","event","clientX","touches","trackClientRect","getClientRect","position","x","y","addDocumentMouseMoveListener","addDocumentMouseUpListener","preventDefault","handleMouseDown","activeTrackStyle","getActiveTrackStyle","track","handleTouchStart","activeTrack","Component","autobind"],"mappings":"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","file":"track.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport autobind from 'autobind-decorator';\n\n/**\n * @ignore\n */\nexport default class Track extends React.Component {\n  /**\n   * @override\n   * @return {Object}\n   * @property {Function} children\n   * @property {Function} classNames\n   * @property {Boolean} draggableTrack\n   * @property {Function} onTrackDrag\n   * @property {Function} onTrackMouseDown\n   * @property {Function} percentages\n   */\n  static get propTypes() {\n    return {\n      children: PropTypes.node.isRequired,\n      classNames: PropTypes.objectOf(PropTypes.string).isRequired,\n      draggableTrack: PropTypes.bool,\n      onTrackDrag: PropTypes.func,\n      onTrackMouseDown: PropTypes.func.isRequired,\n      percentages: PropTypes.objectOf(PropTypes.number).isRequired\n    };\n  }\n\n  /**\n   * @param {Object} props\n   * @param {InputRangeClassNames} props.classNames\n   * @param {Boolean} props.draggableTrack\n   * @param {Function} props.onTrackDrag\n   * @param {Function} props.onTrackMouseDown\n   * @param {number} props.percentages\n   */\n  constructor(props) {\n    super(props);\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    this.nodeRef = React.createRef();\n    this.trackDragEvent = null;\n  }\n\n  /**\n   * @private\n   * @return {ClientRect}\n   */\n  getClientRect() {\n    return this.nodeRef.current\n      ? this.nodeRef.current.getBoundingClientRect()\n      : {};\n  }\n\n  /**\n   * @private\n   * @return {Object} CSS styles\n   */\n  getActiveTrackStyle() {\n    const width = `${(this.props.percentages.max - this.props.percentages.min) *\n      100}%`;\n    const left = `${this.props.percentages.min * 100}%`;\n\n    return { left, width };\n  }\n\n  /**\n   * Listen to mousemove event\n   * @private\n   * @return {void}\n   */\n  addDocumentMouseMoveListener() {\n    this.removeDocumentMouseMoveListener();\n    if (this.nodeRef.current) {\n      this.nodeRef.current.ownerDocument.addEventListener(\n        'mousemove',\n        this.handleMouseMove\n      );\n    }\n  }\n\n  /**\n   * Listen to mouseup event\n   * @private\n   * @return {void}\n   */\n  addDocumentMouseUpListener() {\n    this.removeDocumentMouseUpListener();\n    if (this.nodeRef.current) {\n      this.nodeRef.current.ownerDocument.addEventListener(\n        'mouseup',\n        this.handleMouseUp\n      );\n    }\n  }\n\n  /**\n   * @private\n   * @return {void}\n   */\n  removeDocumentMouseMoveListener() {\n    if (this.nodeRef.current) {\n      this.nodeRef.current.ownerDocument.removeEventListener(\n        'mousemove',\n        this.handleMouseMove\n      );\n    }\n  }\n\n  /**\n   * @private\n   * @return {void}\n   */\n  removeDocumentMouseUpListener() {\n    if (this.nodeRef.current) {\n      this.nodeRef.current.ownerDocument.removeEventListener(\n        'mouseup',\n        this.handleMouseUp\n      );\n    }\n  }\n\n  /**\n   * @private\n   * @param {SyntheticEvent} event\n   * @return {void}\n   */\n  @autobind\n  handleMouseMove(event) {\n    if (!this.props.draggableTrack) {\n      return;\n    }\n\n    if (this.trackDragEvent !== null) {\n      this.props.onTrackDrag(event, this.trackDragEvent);\n    }\n\n    this.trackDragEvent = event;\n  }\n\n  /**\n   * @private\n   * @return {void}\n   */\n  @autobind\n  handleMouseUp() {\n    if (!this.props.draggableTrack) {\n      return;\n    }\n\n    this.removeDocumentMouseMoveListener();\n    this.removeDocumentMouseUpListener();\n    this.trackDragEvent = null;\n  }\n\n  /**\n   * @private\n   * @param {SyntheticEvent} event - User event\n   */\n  @autobind\n  handleMouseDown(event) {\n    const clientX = event.touches ? event.touches[0].clientX : event.clientX;\n    const trackClientRect = this.getClientRect();\n    const position = {\n      x: clientX - trackClientRect.left,\n      y: 0\n    };\n\n    this.props.onTrackMouseDown(event, position);\n\n    if (this.props.draggableTrack) {\n      this.addDocumentMouseMoveListener();\n      this.addDocumentMouseUpListener();\n    }\n  }\n\n  /**\n   * @private\n   * @param {SyntheticEvent} event - User event\n   */\n  @autobind\n  handleTouchStart(event) {\n    event.preventDefault();\n\n    this.handleMouseDown(event);\n  }\n\n  /**\n   * @override\n   * @return {JSX.Element}\n   */\n  render() {\n    const activeTrackStyle = this.getActiveTrackStyle();\n\n    return (\n      <div\n        className={this.props.classNames.track}\n        onMouseDown={this.handleMouseDown}\n        onTouchStart={this.handleTouchStart}\n        ref={this.nodeRef}\n      >\n        <div\n          style={activeTrackStyle}\n          className={this.props.classNames.activeTrack}\n        />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n"]}